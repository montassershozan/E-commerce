"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[492],{492:(S,d,i)=>{i.r(d),i.d(d,{SettingsModule:()=>I});var u=i(6814),r=i(95),t=i(4769),f=i(9862);let g=(()=>{class s{constructor(e){this._HttpClient=e}forgetpassword(e){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",{email:e})}resetcode(e){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",{resetCode:e})}resetpassword(e,o){return this._HttpClient.put("https://route-ecommerce.onrender.com/api/v1/auth/resetPassword",{email:e,newPassword:o})}static#t=this.\u0275fac=function(o){return new(o||s)(t.LFG(f.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var l=i(1120),_=i(6334),c=i(5881);function w(s,a){1&s&&(t.TgZ(0,"p",10),t._uU(1,"please fillout filed!"),t.qZA())}function h(s,a){1&s&&(t.TgZ(0,"p",10),t._uU(1,"please fillout filed!"),t.qZA())}let v=(()=>{class s{constructor(e,o,n){this._SettingsserviceService=e,this._Router=o,this._AuthnService=n,this.mssg="",this.resetfrm=new r.cw({email:new r.NI(null,[r.kI.required,r.kI.email]),newPassword:new r.NI(null,[r.kI.required,r.kI.pattern(/^[A-Z][a-zA-Z0-9]{5,16}$/)])})}resetpassword(e){e.valid&&this._SettingsserviceService.resetpassword(e.value.email,e.value.newPassword).subscribe({next:o=>{console.log(o),this.mssg=o.message,this.logout()},error:o=>{console.log(o),this.mssg=o.error.message}})}logout(){this._AuthnService.logout()}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(g),t.Y36(l.F0),t.Y36(_.p))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-resetpassword"]],decls:17,vars:4,consts:[[1,"mt-4","pt-3"],[1,"container","pt-5","pb-5","shadow","w-50","mt-4","mb-5","bg-body-secondary","text-success"],[1,"text-center","pb-3","border","border-5","pt-3","rounded-pill"],[1,"w-50","m-auto",3,"formGroup","ngSubmit"],[1,"pb-2"],["type","email","formControlName","email",1,"form-control"],["class","text-danger",4,"ngIf"],["type","password","formControlName","newPassword",1,"form-control"],[1,"mt-2","text-success","bg-info"],[1,"btn","btn-success","mt-3","text-center"],[1,"text-danger"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3,"Reset Password"),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return n.resetpassword(n.resetfrm)}),t.TgZ(5,"label",4),t._uU(6,"Email :"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,w,2,0,"p",6),t.TgZ(9,"label",4),t._uU(10,"New password :"),t.qZA(),t._UZ(11,"input",7),t.YNc(12,h,2,0,"p",6),t.TgZ(13,"h2",8),t._uU(14),t.qZA(),t.TgZ(15,"button",9),t._uU(16,"Reset Password"),t.qZA()()()()),2&o){let p,m;t.xp6(4),t.Q6J("formGroup",n.resetfrm),t.xp6(4),t.Q6J("ngIf",(null==(p=n.resetfrm.get("email"))?null:p.getError("required"))&&(null==(p=n.resetfrm.get("email"))?null:p.touched)),t.xp6(4),t.Q6J("ngIf",(null==(m=n.resetfrm.get("newPassword"))?null:m.getError("required"))&&(null==(m=n.resetfrm.get("newPassword"))?null:m.touched)),t.xp6(2),t.Oqu(n.mssg)}},dependencies:[u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,c.bc,c.VP,c.YE]})}return s})();function b(s,a){1&s&&(t.TgZ(0,"p",12),t._uU(1," please fillout filed!"),t.qZA())}function Z(s,a){1&s&&(t.TgZ(0,"p",12),t._uU(1,"enter correct email !!"),t.qZA())}function x(s,a){if(1&s&&(t.TgZ(0,"div",13)(1,"strong")(2,"p",14),t._uU(3),t.qZA()()()),2&s){const e=t.oxw(2);t.xp6(3),t.Oqu(e.mssg)}}function C(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"div",4)(1,"h2",5),t._uU(2,"Forget Password"),t.qZA(),t.TgZ(3,"form",6),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.forgetPassword(n.forgetfrm))}),t.TgZ(4,"label",7),t._uU(5,"Email :"),t.qZA(),t._UZ(6,"input",8),t.YNc(7,b,2,0,"p",9),t.YNc(8,Z,2,0,"p",9),t.YNc(9,x,4,1,"div",10),t.TgZ(10,"button",11),t._uU(11,"Forget Password"),t.qZA()()()}if(2&s){const e=t.oxw();let o,n;t.xp6(3),t.Q6J("formGroup",e.forgetfrm),t.xp6(4),t.Q6J("ngIf",(null==(o=e.forgetfrm.get("email"))?null:o.getError("required"))&&(null==(o=e.forgetfrm.get("email"))?null:o.touched)),t.xp6(1),t.Q6J("ngIf",null==(n=e.forgetfrm.get("email"))?null:n.getError("email")),t.xp6(1),t.Q6J("ngIf",!e.step1)}}function T(s,a){if(1&s&&(t.TgZ(0,"div",13)(1,"strong")(2,"p",14),t._uU(3),t.qZA()()()),2&s){const e=t.oxw(2);t.xp6(3),t.Oqu(e.mssg)}}function y(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"div",15)(1,"h2",5),t._uU(2,"Enter Reset Code"),t.qZA(),t.TgZ(3,"form",6),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.resetcodee(n.resetcodefrm))}),t.TgZ(4,"label",16),t._uU(5,"Reset code:"),t.qZA(),t._UZ(6,"input",17),t.YNc(7,T,4,1,"div",10),t.TgZ(8,"button",11),t._uU(9,"valid code"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(3),t.Q6J("formGroup",e.resetcodefrm),t.xp6(4),t.Q6J("ngIf",!e.step1)}}const A=[{path:"",redirectTo:"forget",pathMatch:"full"},{path:"forget",component:(()=>{class s{constructor(e,o){this._SettingsserviceService=e,this._Router=o,this.step1=!0,this.step2=!1,this.mssg="",this.forgetfrm=new r.cw({email:new r.NI(null,[r.kI.required,r.kI.email])}),this.resetcodefrm=new r.cw({resetCode:new r.NI(null,[r.kI.required])})}forgetPassword(e){e.valid&&this._SettingsserviceService.forgetpassword(e.value.email).subscribe({next:o=>{console.log(o),this.mssg=o.message,this.step1=!1,this.step2=!0},error:o=>{console.log(o)}})}resetcodee(e){e.valid&&(console.log(e.value.resetCode),this._SettingsserviceService.resetcode(e.value.resetCode).subscribe({next:o=>{console.log(o),this.mssg=o.status,this._Router.navigate(["/settings/reset"])},error:o=>{console.log(o)}}))}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(g),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-forgetpassword"]],decls:4,vars:2,consts:[[1,"mt-4","pt-3"],["class","container pt-5 pb-5 shadow w-50 mt-5 mb-5  bg-body-secondary text-success",4,"ngIf"],[1,"mt-3","pt-3"],["class","container w-50 pt-5 mt-5 mb-5 pb-5 shadow bg-body-secondary text-success",4,"ngIf"],[1,"container","pt-5","pb-5","shadow","w-50","mt-5","mb-5","bg-body-secondary","text-success"],[1,"text-center","pb-3","border","border-5","pt-3","rounded-pill"],[1,"w-50","m-auto",3,"formGroup","ngSubmit"],["for","email",1,"pb-2"],["type","email","formControlName","email","id","email",1,"form-control"],["class","text-danger",4,"ngIf"],["class","alert alert-success mt-3","role","alert",4,"ngIf"],[1,"btn","btn-success","mt-3","text-center"],[1,"text-danger"],["role","alert",1,"alert","alert-success","mt-3"],[1,"mt-2","text-success"],[1,"container","w-50","pt-5","mt-5","mb-5","pb-5","shadow","bg-body-secondary","text-success"],["for","code",1,"pb-2"],["type","text","formControlName","resetCode","id","code",1,"form-control"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.YNc(1,C,12,4,"div",1),t.qZA(),t.TgZ(2,"div",2),t.YNc(3,y,10,2,"div",3),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",n.step1),t.xp6(2),t.Q6J("ngIf",n.step2))},dependencies:[u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,c.bc,c.VP,c.YE]})}return s})()},{path:"reset",component:v}];let F=(()=>{class s{static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275mod=t.oAB({type:s});static#s=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(A),l.Bz]})}return s})(),I=(()=>{class s{static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275mod=t.oAB({type:s});static#s=this.\u0275inj=t.cJS({imports:[u.ez,F,r.UX,r.u5,c.Ju,l.Bz]})}return s})()}}]);